(()=>{var e={495:e=>{apiKey="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",e.exports={requestSynonym:async function(e,t){const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"From now on, I only want single word answers."},{role:"system",content:"You are the oxford dictionary."},{role:"user",content:`Provide me with a synonym of "${e}". Note that the word is used in this context: "${t}".`}]})};try{const e=await fetch("https://api.openai.com/v1/chat/completions",n);return(await e.json()).choices[0].message.content}catch(e){return"Please try again"}},requestTranslation:async function(e,t){const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"From now on, I only want single word answers."},{role:"system",content:`You are a Helpul assistant that translates english to "${t}".`},{role:"user",content:`Provide me with a Translation of "${e}" to "${t}".`}]})};try{const e=await fetch("https://api.openai.com/v1/chat/completions",n);return(await e.json()).choices[0].message.content}catch(e){return"Please try again"}},requestAntonym:async function(e,t){const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"From now on, I only want single word answers."},{role:"system",content:"You are the oxford dictionary."},{role:"user",content:`Provide me with a antonnym of "${e}". Note that the word is used in this context: "${t}"`}]})};try{const e=await fetch("https://api.openai.com/v1/chat/completions",n);return(await e.json()).choices[0].message.content}catch(e){return"Please try again"}},requestDefinition:async function(e,t){const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are the oxford dictionary. Provide a simple defintion only. If the context is insufficient, provide any simple,general defnition of the word."},{role:"user",content:`Provide me with a simple definition of "${e}". Note that the word is used in this context: "${t}"`}]})};try{const e=await fetch("https://api.openai.com/v1/chat/completions",n);return(await e.json()).choices[0].message.content}catch(e){return"Please try again"}},requestExampleSentence:async function(e,t){const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a simple-example-sentence-generator. Provide an example sentence only. Do not use the same context for the sentence."},{role:"user",content:`Provide me with a simple example sentence containing "${e}". Note that the word is used in this context: "${t}".`}]})};try{const e=await fetch("https://api.openai.com/v1/chat/completions",n);return(await e.json()).choices[0].message.content}catch(e){return"Please try again"}},requestHomonym:async function(e){const t={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"From now on, I only want single word answers."},{role:"system",content:"You are the oxford dictionary."},{role:"user",content:`Provide me with a homonym of "${e}".`}]})};try{const e=await fetch("https://api.openai.com/v1/chat/completions",t);return(await e.json()).choices[0].message.content}catch(e){return"Please try again"}},createImage:async function(e){const t={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`},body:JSON.stringify({model:"image-alpha-001",prompt:e,num_images:1,size:"256x256"})};try{const e=await fetch("https://api.openai.com/v1/images/generations",t);return(await e.json()).data[0].url}catch(e){return"Please try again"}},GetWikiLink:function(e){return`https://en.wikipedia.org/wiki/${encodeURIComponent(e)}`}}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{const{requestSynonym:e,requestTranslation:t,requestAntonym:o,requestDefinition:s,requestExampleSentence:a,requestHomonym:i,createImage:r,GetWikiLink:c}=n(495);var l;chrome.storage.sync.get(["language"],(function(e){void 0===(l=e.language)&&chrome.storage.sync.set({language:"Afrikaans"},(function(){l="Afrikaans"}))})),chrome.storage.onChanged.addListener((function(e,t){"sync"===t&&e.language&&(l=e.language.newValue)}));let d=null,p=!1;document.addEventListener("dblclick",(async n=>{d&&d.remove();let m=window.getSelection().toString().trim();console.log(m);let u=n.target.textContent.split(" "),h=u.indexOf(m),y=Math.max(0,h-20),g=Math.min(u.length-1,h+20),f=u.slice(y,g+1).join(" ");console.log(f);let w=document.createElement("div");w.classList.add("popup");let v=document.createElement("div");if(v.classList.add("spinner"),""!==m){w.appendChild(v),w.style.top=n.pageY+"px",w.style.left=n.pageX+"px";let u=!1;const h=e=>{e.preventDefault(),u=!0,pos3=e.clientX,pos4=e.clientY},y=e=>{e.preventDefault(),u&&(pos1=pos3-e.clientX,pos2=pos4-e.clientY,pos3=e.clientX,pos4=e.clientY,w.style.top=w.offsetTop-pos2+"px",w.style.left=w.offsetLeft-pos1+"px")},g=e=>{e.preventDefault(),u=!1};let L=document.createElement("div");L.textContent="➕",L.classList.add("popupMover"),w.appendChild(L),L.addEventListener("mousedown",h),document.addEventListener("mousemove",y),document.addEventListener("mouseup",g);let S=document.createElement("button");S.textContent="✖️",S.classList.add("closeButton"),w.appendChild(S),S.addEventListener("click",(()=>{w.remove()})),document.body.appendChild(w),d=w;let C=document.createElement("div"),E=function(e){var t=document.createElement("button");return t.textContent="▶",t.classList.add("playButton"),t.addEventListener("click",(async function(){if("speechSynthesis"in window){await async function(){return new Promise((e=>{"speechSynthesis"in window&&0!==speechSynthesis.getVoices().length?e():speechSynthesis.onvoiceschanged=function(){e(),speechSynthesis.onvoiceschanged=null}}))}();var t=new SpeechSynthesisUtterance(e);speechSynthesis.speak(t)}else console.error("Speech synthesis is not supported in this browser.")})),t}(m);C.appendChild(E);const[T,b,$,P,k,O,j]=await Promise.all([e(m,f),o(m,f),s(m,f),a(m,f),i(m),t(m,l),r(m)]);let B=document.createElement("div");B.innerText=m,B.classList.add("popup-word"),C.appendChild(B);let q=document.createElement("div");q.innerHTML=`<span class="bold-text">Synonym:</span> ${T}`,q.classList.add("popup-synonym"),C.appendChild(q);let A=document.createElement("div");A.innerHTML=`<span class="bold-text">Antonym:</span> ${b}`,A.classList.add("popup-antonym"),C.appendChild(A);let N=document.createElement("div");N.innerHTML=`<span class="bold-text">Homonym:</span> ${k}`,N.classList.add("popup-homonym"),C.appendChild(N);let H=document.createElement("div");H.innerHTML=`<span class="bold-text">Translation:</span> ${O}`,H.classList.add("popup-translation"),C.appendChild(H);let Y=document.createElement("div");Y.innerHTML=`<span class="bold-text">Definition:</span> ${$}`,Y.classList.add("popup-definition"),C.appendChild(Y);let K=document.createElement("div");K.innerHTML=`<span class="bold-text">Example Sentence:</span> ${P}`,K.classList.add("popup-example"),C.appendChild(K);const z=document.createElement("div");z.classList.add("popup-img"),w.insertBefore(z,w.firstChild);let M=document.createElement("button");M.classList.add("imageButton");let I=document.createElement("img");I.src="https://cdn-icons-png.flaticon.com/512/223/223117.png",M.appendChild(I),M.addEventListener("click",(async()=>{let e;p?e=C.querySelector("img"):(e=document.createElement("img"),e.src=j,e.classList.add("created-img"),w.removeChild(z),w.insertBefore(e,w.firstChild),p=!0)})),w.appendChild(M),p=!1;var x=document.createElement("a");x.textContent="🔗",x.classList.add("linkButton"),x.href=c(m),x.target="blank",x.rel="noopener noreferrer",w.appendChild(x),w.replaceChild(C,v)}d=w}))})()})();